@model templateProj.Models.UserModel
@{
    Layout = null;
    string proPicPath = Model.ProfilePic;
    string uName = Model.Username;
    
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Eco-Garb | User Profile</title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.5 -->
    <link rel="stylesheet" href="../../Styles/bootstrap/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <!-- fullCalendar 2.2.5-->
    <link rel="stylesheet" href="../plugins/fullcalendar/fullcalendar.min.css">
    <link rel="stylesheet" href="../plugins/fullcalendar/fullcalendar.print.css" media="print">
    <!-- Theme style -->
    <link rel="stylesheet" href="../../Styles/dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. We have chosen the skin-blue for this starter
          page. However, you can choose any other skin. Make sure you
          apply the skin class to the body tag so the changes take effect.
    -->
    <link rel="stylesheet" href="../../Styles/dist/css/skins/skin-blue.min.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>
<body class="hold-transition skin-blue sidebar-mini" onload=" UserInfoLoad(); Privacy();">
    <div class="wrapper">

        @Html.Partial("_AdminNavigation", Model);
        <div class="content-wrapper" style="margin-top:-20px">
           
            <!-- Content Header (Page header) -->
            <section class="content-header" >
                <h1>
                    User Profile
                </h1>
               
            </section>
            <ol class="breadcrumb" style="left:100px ; top:50px ; background-color:transparent">
                <li><a href="@Url.Action("Home", "Home" )" style="color:seagreen"><i class="fa fa-dashboard" style="color:seagreen"></i> Home</a></li>
                <li class="active">User profile</li>
            </ol>
            <!-- Main content -->
            <section class="content">
                <div class="row">
                    <div class="col-md-3">

                        <!-- Profile Image -->
                        <div class="box box-success">
                            <div class="box-body box-profile">
                                <img class="profile-user-img img-responsive img-circle" src="@proPicPath" alt="User profile picture">
                                <h3 class="profile-username text-center">@uName</h3>
                                <p class="text-muted text-center">@Model.FirstName</p><br />
                               
                                <div id="test" style="padding:5px 10px;background:seagreen;border:1px solid #00ad2d;position:relative;color:#fff;border-radius:2px;text-align:center;float:left;cursor:pointer;width:180px;font-weight:600" @*onchange="SaveUploadImageName()"*@>
                                    Upload Picture
                                    <input type="file" id="photo" name="photo" style="position: absolute;z-index: 1000;opacity: 0;cursor: pointer;right: 0;top: 0;height: 100%;font-size: 24px;width: 100%;"onclick="SaveUploadImageName()" /> 
                                    @*<img src="" height="200" alt="Image Preview">*@    
                                </div>
                            <br /><br />
                            </div><!-- /.box-body -->
                        </div><!-- /.box -->
                        <!-- About Me Box -->
                        <div class="box box-success">
                            <div class="box-header with-border">
                                <h3 class="box-title">About Me</h3>
                            </div><!-- /.box-header -->
                            <div class="box-body">                   
                                <strong><i class="fa fa-building margin-r-5"></i>  Company Name</strong>
                                <p class="text-muted">@Model.CompanyName</p>
                                <hr>

                                <strong><i class="fa fa-map-marker margin-r-5"></i> Location</strong>
                                <p class="text-muted">@Model.Address</p>

                                <hr>

                                <strong><i class="fa fa-phone margin-r-5"></i> Contact Me</strong>
                                <p class="text-muted">@Model.ContactNo</p>
                                <hr>

                                <strong><i class="fa fa-gift margin-r-5"></i> Date of Birth</strong>
                                <p class="text-muted">@Model.DoB</p>
                                <hr>

                                <strong><i class="fa fa-file-text-o margin-r-5"></i> Notes</strong>
                                <p class="text-muted">@Model.Notes</p>

                                </div><!-- /.box-body -->
                        </div><!-- /.box -->
                    </div><!-- /.col -->
                    <div class="col-md-9">
                        <div class="nav-tabs-custom">
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#timeline" data-toggle="tab">Timeline</a></li>
                                <li><a href="#settings" data-toggle="tab">Settings</a></li>
                            </ul>
                            <div class="tab-content">
                        
                                <div class=" active tab-pane" id="timeline">
                                    <!-- The timeline -->
                                    <ul class="timeline timeline-inverse">
                                        <!-- timeline time label -->
                                        <li class="time-label">
                                            <span class="bg-red">
                                                10 Feb. 2014
                                            </span>
                                        </li>
                                        <!-- /.timeline-label -->
                                        <!-- timeline item -->
                                        <li>
                                            <i class="fa fa-envelope bg-blue"></i>
                                            <div class="timeline-item">
                                                <span class="time"><i class="fa fa-clock-o"></i> 12:05</span>
                                                <h3 class="timeline-header"><a href="#">Support Team</a> sent you an email</h3>
                                                <div class="timeline-body">
                                                    Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles,
                                                    weebly ning heekya handango imeem plugg dopplr jibjab, movity
                                                    jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo kaboodle
                                                    quora plaxo ideeli hulu weebly balihoo...
                                                </div>
                                                <div class="timeline-footer">
                                                    <a class="btn btn-primary btn-xs">Read more</a>
                                                    <a class="btn btn-danger btn-xs">Delete</a>
                                                </div>
                                            </div>
                                        </li>
                                        <!-- END timeline item -->
                                        <!-- timeline item -->
                                        <li>
                                            <i class="fa fa-user bg-aqua"></i>
                                            <div class="timeline-item">
                                                <span class="time"><i class="fa fa-clock-o"></i> 5 mins ago</span>
                                                <h3 class="timeline-header no-border"><a href="#">Sarah Young</a> accepted your friend request</h3>
                                            </div>
                                        </li>
                                        <!-- END timeline item -->
                                        <!-- timeline item -->
                                        <li>
                                            <i class="fa fa-comments bg-yellow"></i>
                                            <div class="timeline-item">
                                                <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>
                                                <h3 class="timeline-header"><a href="#">Jay White</a> commented on your post</h3>
                                                <div class="timeline-body">
                                                    Take me to your leader!
                                                    Switzerland is small and neutral!
                                                    We are more like Germany, ambitious and misunderstood!
                                                </div>
                                                <div class="timeline-footer">
                                                    <a class="btn btn-warning btn-flat btn-xs">View comment</a>
                                                </div>
                                            </div>
                                        </li>
                                        <!-- END timeline item -->
                                        <!-- timeline time label -->
                                        <li class="time-label">
                                            <span class="bg-green">
                                                3 Jan. 2014
                                            </span>
                                        </li>
                                        <!-- /.timeline-label -->
                                        <!-- timeline item -->
                                        <li>
                                            <i class="fa fa-camera bg-purple"></i>
                                            <div class="timeline-item">
                                                <span class="time"><i class="fa fa-clock-o"></i> 2 days ago</span>
                                                <h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded new photos</h3>
                                                <div class="timeline-body">
                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                    <img src="http://placehold.it/150x100" alt="..." class="margin">
                                                </div>
                                            </div>
                                        </li>
                                        <!-- END timeline item -->
                                        <li>
                                            <i class="fa fa-clock-o bg-gray"></i>
                                        </li>
                                    </ul>
                                </div><!-- /.tab-pane -->

                                <div class="tab-pane" id="settings">
                                    <form class="form-horizontal">
                                        <div class="form-group">
                                            <label for="Uname" class="col-sm-2 control-label">Username</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="Uname" placeholder="Username" disabled="disabled">
                                            </div>
                                        </div>
                                        <div class="form-group" id="divFname">
                                            <label for="Fname" class="col-sm-2 control-label">Full Name</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="Fname" placeholder="Full Name" disabled="disabled" oninput="fullNameValidation()">
                                             </div>
                                        </div>

                                        <div class="form-group" id="divInputEmail">
                                            <label for="inputEmail" class="col-sm-2 control-label">Email</label>
                                            <div class="col-sm-10">
                                                <input type="email" class="form-control" id="inputEmail" placeholder="Email" disabled="disabled" oninput="inputEmailValidation()">
                                            </div>
                                        </div>    

                                        <div class="form-group" id="divLocation">
                                            <label for="location" class="col-sm-2 control-label">Location</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="location" placeholder="Location" disabled="disabled" oninput="locationValidation()">
                                            </div>
                                        </div>

                                        <div class="form-group" id="divContact">
                                            <label for="contact" class="col-sm-2 control-label">Contact No</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="contact" placeholder="Contact No" disabled="disabled" oninput="contactValidation()">
                                            </div>
                                        </div>
                                        <div class="form-group" id="divDoB">
                                            <label for="DoB" class="col-sm-2 control-label">Date Of birth</label>
                                            <div class="col-sm-10">
                                                <input type="date" class="form-control" id="DoB" placeholder="Date Of birth" disabled="disabled" oninput="dobValidation()">
                                            </div>
                                        </div>             

                                        <div class="form-group" id="divDesc">
                                            <label for="desc" class="col-sm-2 control-label">Description</label>
                                            <div class="col-sm-10">
                                                <input type="text" class="form-control" id="desc" placeholder="Desc" disabled="disabled" multiple oninput="descValidation()">
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-sm-offset-2 col-sm-10">
                                                <button type="button" class="btn btn-default" id="edit" onclick="EnableEdit();" style="background-color:seagreen;color:white">Edit</button>      
                                              <button type="button" class="btn btn-default" id="submit" onclick="formValidation();" disabled="disabled" style="background-color:seagreen;color:white">Submit</button>                                         
                                            </div>           
                                        </div>
                                    </form>

                                <script>
                                    
                                 
                                   </script>


                                </div><!-- /.tab-pane -->
                            </div><!-- /.tab-content -->
                        </div><!-- /.nav-tabs-custom -->
                    </div><!-- /.col -->
                </div><!-- /.row -->

            </section><!-- /.content -->
        </div><!-- /.content-wrapper -->

       @Html.Partial("_ManagerFooter");

    </div><!-- ./wrapper -->
    <!-- jQuery 2.1.4 -->
    <script src="../../Styles/plugins/jQuery/jQuery-2.1.4.min.js"></script>
    <!-- Bootstrap 3.3.5 -->
    <script src="../../Styles/bootstrap/js/bootstrap.min.js"></script>
    <!-- FastClick -->
    <script src="../../Styles/plugins/fastclick/fastclick.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../Styles/dist/js/app.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="../../Styles/dist/js/demo.js"></script>

    <script>

            function Privacy() {
                if ('@uName' != '@Session["Uname"].ToString()')
                {
                    $('#edit').hide();
                    $('#submit').hide();
                }
            }

            function UserInfoLoad()
            {
                $('#Uname').val('@Model.Username');
                $('#Fname').val('@Model.FirstName');
                $('#inputEmail').val('@Model.Email');
                $('#location').val('@Model.Address');
                $('#contact').val('@Model.ContactNo');
                $('#DoB').val('@Model.DoB');
                $('#desc').val('@Model.Notes');
            }

            function EnableEdit()
            {

                $('#Fname').attr('disabled', false);           
                $('#inputEmail').attr('disabled', false);
                $('#location').attr('disabled', false);
                $('#contact').attr('disabled', false);
                $('#DoB').attr('disabled', false);
                $('#desc').attr('disabled', false);
                $('#submit').attr('disabled', false);
                document.getElementById("submit").innerHTML = "Submit";
            }

            function SaveUserInfo()
            {

                // form validations
                var dataArr = [];

                dataArr.push(document.getElementById("Fname").value);
                dataArr.push(document.getElementById("inputEmail").value);
                dataArr.push(document.getElementById("location").value);
                dataArr.push(document.getElementById("contact").value);
                dataArr.push(document.getElementById("DoB").value);
                dataArr.push(document.getElementById("desc").value);
                $.ajax({
                    type: 'POST',
                    url: '/Profile/SaveUserInfo',
                    data: { infoArr: dataArr, },

                    traditional: true,
                    success: function (response) {

                        //change the button appearance
                        document.getElementById("submit").innerHTML = "Submitted";
                        $('#Fname').attr('disabled', true);
                        $('#inputEmail').attr('disabled', true);
                        $('#location').attr('disabled', true);
                        $('#contact').attr('disabled', true);
                        $('#DoB').attr('disabled', true);
                        $('#desc').attr('disabled', true);
                        $('#submit').attr('disabled', true);
                    }
                });
            }
    </script>

    <script>
            function formValidation() {
                var Fname = document.getElementById("Fname").value;
                var inputEmail = document.getElementById("inputEmail").value;
                var location = document.getElementById("location").value;
                var contact = document.getElementById("contact").value;
                var DoB = document.getElementById("DoB").value;
                var desc = document.getElementById("desc").value;

                var exFname = document.getElementById("FnameValidate");
                var exInputEmail = document.getElementById("inputEmailValidate");
                var exLocation = document.getElementById("locationValidate");
                var exContact = document.getElementById("contactValidate");
                var exDoB = document.getElementById("DoBValidate");
                var exDesc = document.getElementById("descValidate");

                if (Fname == null || Fname == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "FnameValidate")
                    var node = document.createTextNode("please enter the full name");
                    para.appendChild(node);
                    var element = document.getElementById("divFname");
                    element.appendChild(para);

                    var child = document.getElementById("FnameValidate");
                    element.replaceChild(para, child);

                    document.getElementById("FnameValidate").style.color = "red";
                    document.getElementById("FnameValidate").style.marginLeft = "140px";
                    document.getElementById("Fname").style.borderColor = "red";
                }

                else if (inputEmail == null || inputEmail == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "inputEmailValidate")
                    var node = document.createTextNode("please enter the e-mail");
                    para.appendChild(node);
                    var element = document.getElementById("divInputEmail");
                    element.appendChild(para);

                    var child = document.getElementById("inputEmailValidate");
                    element.replaceChild(para, child);

                    document.getElementById("inputEmailValidate").style.color = "red";
                    document.getElementById("inputEmailValidate").style.marginLeft = "140px";
                    document.getElementById("inputEmail").style.borderColor = "red";

                }

                else if (location == null || location == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "locationValidate")
                    var node = document.createTextNode("please enter the location");
                    para.appendChild(node);
                    var element = document.getElementById("divLocation");
                    element.appendChild(para);

                    var child = document.getElementById("locationValidate");
                    element.replaceChild(para, child);

                    document.getElementById("locationValidate").style.color = "red";
                    document.getElementById("locationValidate").style.marginLeft = "140px";
                    document.getElementById("location").style.borderColor = "red";

                }

                else if (contact == null || contact == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "contactValidate")
                    var node = document.createTextNode("please enter the contact number");
                    para.appendChild(node);
                    var element = document.getElementById("divContact");
                    element.appendChild(para);

                    var child = document.getElementById("contactValidate");
                    element.replaceChild(para, child);

                    document.getElementById("contactValidate").style.color = "red";
                    document.getElementById("contactValidate").style.marginLeft = "140px";
                    document.getElementById("contact").style.borderColor = "red";

                }

                else if (DoB == null || DoB == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "DoBValidate")
                    var node = document.createTextNode("please enter the date of birth");
                    para.appendChild(node);
                    var element = document.getElementById("divDoB");
                    element.appendChild(para);

                    var child = document.getElementById("DoBValidate");
                    element.replaceChild(para, child);

                    document.getElementById("DoBValidate").style.color = "red";
                    document.getElementById("DoBValidate").style.marginLeft = "140px";
                    document.getElementById("DoB").style.borderColor = "red";

                }

                else if (desc == null || desc == "") {
                    var para = document.createElement("p");
                    para.setAttribute("id", "descValidate")
                    var node = document.createTextNode("please enter the decription");
                    para.appendChild(node);
                    var element = document.getElementById("divDesc");
                    element.appendChild(para);

                    var child = document.getElementById("descValidate");
                    element.replaceChild(para, child);

                    document.getElementById("descValidate").style.color = "red";
                    document.getElementById("descValidate").style.marginLeft = "140px";
                    document.getElementById("desc").style.borderColor = "red";

                }

                else if (!exFname && !exInputEmail && !exLocation && !exContact && !exDoB && !exDesc) {
                    SaveUserInfo();
                    $('#success-modal-msg').html("User profile updated successfully..");
                    $('#successModal').modal({
                        show: 'show'
                    });
                } 
            }
    </script>
       
    <script>
            function fullNameValidation() {
                var exists = document.getElementById("FnameValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divFname");
                    var child = document.getElementById("FnameValidate");
                    parent.removeChild(child);
                    document.getElementById("Fname").style.borderColor = "initial";

                }
            }

            function inputEmailValidation() {
                var exists = document.getElementById("inputEmailValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divInputEmail");
                    var child = document.getElementById("inputEmailValidate");
                    parent.removeChild(child);
                    document.getElementById("inputEmail").style.borderColor = "initial";

                }
            }

            function locationValidation() {
                var exists = document.getElementById("locationValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divLocation");
                    var child = document.getElementById("locationValidate");
                    parent.removeChild(child);
                    document.getElementById("location").style.borderColor = "initial";

                }
            }

            function contactValidation() {
                var exists = document.getElementById("contactValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divContact");
                    var child = document.getElementById("contactValidate");
                    parent.removeChild(child);
                    document.getElementById("contact").style.borderColor = "initial";

                }
            }

            function dobValidation() {
                var exists = document.getElementById("DoBValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divDoB");
                    var child = document.getElementById("DoBValidate");
                    parent.removeChild(child);
                    document.getElementById("DoB").style.borderColor = "initial";

                }
            }

            function descValidation() {
                var exists = document.getElementById("descValidate");
                if (exists) {
                    //error occured
                    // remove it 
                    var parent = document.getElementById("divDesc");
                    var child = document.getElementById("descValidate");
                    parent.removeChild(child);
                    document.getElementById("desc").style.borderColor = "initial";

                }
            }
    </script>

    <script>
            function SaveUploadImageName() {

                var file = document.getElementById("photo").files[0];
                alert("000  : " + file)
                var reader = new FileReader();
                reader.onloadend = function () {
                    //document.getElementById('testt').setAttribute('src', 'user3-128x128.jpg');
                }
                if (file) {
                    reader.readAsDataURL(file);
                } else {
                }

                alert("3333 : " + reader.result);
                //alert("0000");
                //var imgSrc = document.querySelector("img.photo").src;
                //alert("lll : " + imgSrc);
            //    alert("000");
            //    var preview = document.querySelector('img'); //selects the query named img
            //    var file = document.querySelector('input[type=file]').files[0]; //sames as here
            //    var reader = new FileReader();

            //    alert("111" + file.fileName);
            //    reader.onloadend = function () {
            //        alert("222");
            //        preview.src = reader.result;
            //        alert("333");
            //    }

            //    if (file) {
            //        reader.readAsDataURL(file); //reads the data as a URL
            //        alert("44");
            //    } else {
            //        preview.src = "";
            //    }
            }
    </script>

    <!--Modal Poupus-->
    <!--success Message-->
    <div class="success modal modal fade" id="successModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-green" id="modalHead">
                    <h4 class="modal-title">Success Message</h4>
                </div>
                <div class="modal-body">
                    <p id="success-modal-msg" style="font-size:15px;">message content here&hellip;</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" data-dismiss="modal" id="modalBtn" onclick="window.location.reload();">OK</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

</body>
</html>

